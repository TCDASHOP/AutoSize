<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TCDA Size Guide</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="app.js" defer></script>
</head>

<body>
  <header class="header">
    <div class="headerInner">
      <a id="backToShop" class="backLink" href="https://www.tcda.shop/" rel="noopener">ショップに戻る</a>

      <div class="langTabs" role="tablist" aria-label="Language">
        <button id="langJP" class="tab isActive" type="button" role="tab" aria-selected="true">JP</button>
        <button id="langEN" class="tab" type="button" role="tab" aria-selected="false">EN</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <h1 id="pageTitle" class="title">サイズ自動算出</h1>
      <p id="pageLead" class="lead">
        商品を選び、必要な項目だけ入力してください。JPはcm、ENはinchで表示されます。
      </p>

      <!-- Product select (custom dropdown) -->
      <div class="row">
        <label id="productLabel" class="label" for="productBtn">商品</label>

        <div class="dropdown">
          <button id="productBtn" class="selectBtn" type="button" aria-haspopup="listbox" aria-expanded="false">
            <span id="productBtnText">商品を選択</span>
            <span class="chev" aria-hidden="true">▾</span>
          </button>

          <div id="productMenu" class="menu" role="listbox" aria-label="Products" hidden></div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Inputs (shown/hidden by product) -->
      <section id="inputsArea" class="inputs" hidden>
        <!-- Tops: Nude chest -->
        <div id="groupTops" class="group" hidden>
          <h2 id="topsTitle" class="h2">トップス（Tシャツ / フーディ）</h2>

          <div class="grid2">
            <div class="field">
              <label id="labelNudeChest" class="label" for="nudeChest">ヌード胸囲</label>
              <div class="inputWrap">
                <input id="nudeChest" inputmode="decimal" autocomplete="off" placeholder="例：92" />
                <span id="unitChest" class="unit">cm</span>
              </div>
              <p id="hintNudeChest" class="hint">分かる場合はこれが最優先です。</p>
            </div>

            <div class="field">
              <label id="labelFit" class="label" for="fitPref">フィット感</label>
              <select id="fitPref">
                <option value="standard">標準</option>
                <option value="snug">ぴったり</option>
                <option value="loose">ゆったり</option>
              </select>
              <p id="hintFit" class="hint">好みで「ゆとり量」が変わります。</p>
            </div>
          </div>

          <details class="estimator">
            <summary id="estTitle">ヌード寸法が分からない場合（推定入力）</summary>

            <div class="grid2">
              <div class="field">
                <label id="labelHeight" class="label" for="height">身長</label>
                <div class="inputWrap">
                  <input id="height" inputmode="decimal" autocomplete="off" placeholder="例：170" />
                  <span id="unitHeight" class="unit">cm</span>
                </div>
              </div>

              <div class="field">
                <label id="labelWeight" class="label" for="weight">体重</label>
                <div class="inputWrap">
                  <input id="weight" inputmode="decimal" autocomplete="off" placeholder="例：60" />
                  <span id="unitWeight" class="unit">kg</span>
                </div>
              </div>

              <div class="field">
                <label id="labelSex" class="label" for="sex">性別</label>
                <select id="sex">
                  <option value="female">女性</option>
                  <option value="male">男性</option>
                </select>
              </div>

              <div class="field">
                <label id="labelBmi" class="label" for="bmi">BMI（自動計算）</label>
                <div class="inputWrap">
                  <input id="bmi" inputmode="decimal" autocomplete="off" placeholder="-" disabled />
                </div>
              </div>
            </div>

            <div class="estOut">
              <div id="estSummary" class="estSummary">推定胸囲：—</div>
              <button id="btnSetEstimated" class="pill secondary" type="button" hidden>推定値をセット</button>
              <p id="estNote" class="hint">
                推定値は実測ではありません。自動で上書きせず、必要な場合のみ「推定値をセット」で反映できます。
              </p>
            </div>
          </details>
        </div>

        <!-- Shoes -->
        <div id="groupShoes" class="group" hidden>
          <h2 id="shoesTitle" class="h2">スリッポンシューズ</h2>

          <div class="grid2">
            <div class="field">
              <label id="labelFootLen" class="label" for="footLen">足長（実測）</label>
              <div class="inputWrap">
                <input id="footLen" inputmode="decimal" autocomplete="off" placeholder="例：25.0" />
                <span id="unitFoot" class="unit">cm</span>
              </div>
              <p id="hintFoot" class="hint">左右を測って長い方を採用。</p>
            </div>

            <div class="field">
              <label id="labelShoeFit" class="label" for="shoeFit">好み</label>
              <select id="shoeFit">
                <option value="standard">標準</option>
                <option value="snug">ぴったり</option>
                <option value="loose">ゆったり</option>
              </select>
              <p id="hintShoeFit" class="hint">捨て寸（余裕）が変わります。</p>
            </div>
          </div>

          <p id="shoeNote" class="hint">
            アウトソール長は外寸です。足長と同一視しないでください（補助指標）。
          </p>
        </div>

        <!-- Guide image -->
        <div class="guideBox">
          <img id="guideImg" class="guideImg" src="" alt="Guide" />
          <p id="guideCaption" class="hint">※ 画像は商品に応じて切り替わります。</p>
        </div>

        <!-- Actions -->
        <div class="actions">
          <button id="calcBtn" class="primary" type="button">おすすめサイズを計算</button>
          <button id="resetBtn" class="pill" type="button">入力を見直す</button>
          <button id="scrollTableBtn" class="pill pill-secondary" type="button">サイズ表で選ぶ</button>
        </div>
      </section>

      <!-- Result -->
      <section id="resultArea" class="result" hidden>
        <div class="resultTop">
          <div id="resultTitle" class="resultTitle">おすすめ</div>
          <div id="resultValue" class="resultValue">—</div>
        </div>

        <div id="resultDetail" class="resultDetail"></div>

        <!-- Self-check right under recommendation -->
        <div id="selfCheckWrap" class="selfCheck" hidden></div>

        <div id="errorBox" class="errorBox" hidden>
          <div id="errorText" class="errorText">該当するサイズが見当たりませんでした。</div>
          <div class="actions">
            <button id="errorResetBtn" class="pill" type="button">入力を見直す</button>
            <button id="errorTableBtn" class="pill pill-secondary" type="button">サイズ表で選ぶ</button>
          </div>
        </div>
      </section>
    </section>

    <!-- Size chart -->
    <section class="card">
      <h2 id="chartTitle" class="h2">サイズ表</h2>
      <div id="chartMeta" class="hint">商品を選ぶとサイズ表が表示されます。</div>

      <div class="tableWrap">
        <table id="sizeTable" class="table" aria-label="Size chart">
          <thead id="tableHead"></thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </section>

    <footer class="footer">
      <div class="footerInner">
        <img class="footerLogo" src="assets/logo.png" alt="Transcend Color Digital Apparel" />
        <div class="footerCopy">© 2025 Transcend Color Digital Apparel</div>
      </div>
    </footer>
  </main>
</body>
</html>
